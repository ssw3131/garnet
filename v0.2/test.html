<!DOCTYPE html>
<html>
<head lang="ko">
	<!--<meta charset="euc-kr">-->
	<meta charset="utf-8">
	<title></title>
	<script src="garnet.js"></script>
	<script>

	</script>
</head>
<body>
<div id="stage" style="position:absolute">
	<div width="50%" class="ka" id="a0">d50<a id="aa0">a0</a></div>
	<div width="100%" class="ka" id="a1"><a id="aa1">a1</a>d100</div>
	<input id="i0" type="radio" value="i0" checked>

	<div class="ka" id="a2" class="example"><p><a id="aaa">aaaa</a></p></div>
	<div class="ka" id="a3"><span id="sp3">span3</span></div>
	<p id="p0" data-test="dk-a">dk-a</p>

	<p id="p1" data-test="a dk a">a dk a</p>
	<span id="sp5">span5</span>

	<div class="ka" id="a4"><span id="sp4">span4</span></div>
	<p id="p2" data-test="aaadkaa">aaadkaa</p>

	<p id="p3" data-test="dk">dk</p>

	<p id="p4" data-test="dk"><span>dskdksd</span></p>

	<p id="p5" data-test="dk" lang="it">it</p>
	<span id="sp0">span0</span><span id="sp1">span1</span>
	<i id="i0"><span id="sp2">span2<b id="b0"></b></span></i>
	<i id="i1"><b id="b1" data-test="dkaa">dkaa</b></i>
	<dd id="dd0" data-test="aaadk">aaadk dd0</dd>
	<input id="c1" type="checkbox" value="c1" checked disabled>
	<dd id="dd1">dd1</dd>
	<dd id="dd2">dd2</dd>
	<dd id="dd3">
	<dt id="dt1">dt1</dt>
	</dd>
	<dl id="dl0">dl0
		<dd id="dd4">dd4</dd>
	</dl>
	<dl id="dl1">
		<dd id="dd5">dd5</dd>
	</dl>
	<dl id="dl2">
		<dt id="dt0">dt0</dt>
		<dd id="dd6">dd6</dd>
		<dd id="dd7">dd7</dd>
	</dl>
	<dl id="dl3">
		<dt id="dt1">dt1</dt>
	</dl>
	<a id="aa2" href="#" target="_blank">a_blank</a><a target="_self">a_self</a>
</div>
<div id="result" style="position:fixed;left:100px">
	<div id="scroll"></div>
	<div id="win"></div>
	<div id="json"></div>
</div>
<!--<div id="tween" style="background:#225544;position:absolute;top:0px;width:100px;height:100px"></div>-->


<style>
	p:lang(it) {
		color: #f00
	}

	.array {
		border-left: 1px dotted blue;
		color: red;
		font-weight: bold;
		padding: 5px 0px 5px 5px
	}

	.obj {
		border-left: 1px dotted blue;
		color: blue;
		font-weight: bold;
		padding: 5px 0px 5px 5px
	}

	.data {
		padding: 2px 5px 2px 5px
	}

	html {
		font-size: 12px
	}


</style>
<script>
	console.log( dk )
	console.log( dk.DETECTOR )
	dk.LOOP.S( 'loop1', function() {
		console.log( 'loop1' )
	} )
	dk.WIN.RESIZE.S( 'resize1', function() {
		console.log( 'resize1', 'dk.WIN.width : ', dk.WIN.width, ' / dk.WIN.height : ', dk.WIN.height )
	} )
	dk.WIN.RESIZE.S( 'resize2', function() {
		console.log( 'resize2' )
	} )

	dk.KEY.S( 'a', function( e ) {console.log( e, e.nativeEvent )} )
	dk.KEY.S( 'b', function() {console.log( 'a' )} )
	dk.KEY.S( 'c', function() {console.log( 'a' )} )

	console.log( dk.WIN.RESIZE.S( 'this' ) )
	console.log( dk.WIN.RESIZE.S( 'list' ) )

	var tester = function( k ) {
		console.log( k + ' : ', dk.query( k ) )

	}

	var testList = ['p:lang(it)', 'dd:nth-child(even)', 'dd:nth-of-type(even)', 'dd:nth-child(odd)', 'dd:nth-of-type(odd)', 'dd:nth-child(1)', 'dd:nth-of-type(1)',
		'a:link', ':root', 'dt:only-child', 'dt:only-of-type', 'dd:last-of-type', 'dd:last-child',
		'[target=_blank]', 'p:empty', 'input:disabled', 'input:enabled', 'input:checked', 'dd:first-of-type', 'dd:first-child',
		'[data-test~=dk]', '[data-test~=dk]', '[data-test~=dk]', '[data-test*=dk]', '[data-test$=dk]', '[data-test^=dk]', '[data-test|=dk]',
		'[width]', 'i,dd', 'div ~ p ~ p', 'i b', 'i > b', 'p + span', '#a0', '#a0,#a1', '#a0,#a1,#a2', '.ka', 'span',
		'div ~ p', 'div > p', 'p > a', 'div > p > a', 'i > span > b', 'i > span', 'span > b', 'div.example > p > a', 'div ~ p ~ p'
	], i = testList.length;
	while( i-- ) tester( testList[i] );

	dk.js( jsCallBack, 'test1.js' )
	function jsCallBack() {
		console.log( '로딩완료-js콜백테스트' )
	}

	dk.js( null, 'test1.js', 'test2.js' )

	dk.get( getTest, 'test1.txt' )
	function getTest( data ) {
		console.log( '로딩완료', data )
	}
	//	// openAPI로 연동했을때 callBack처리
	var str = dk.DETECTOR.browser == 'ie' ? encodeURIComponent( '언어의정원' ) : '언어의정원'
	dk.js( openAPICallBakcTest2, 'http://apis.daum.net/contents/movie?apikey=' + 'bffaf40ba59dff1a741998dd1d594e122f4260af&q=' + str + '&output=json&callback=' )
	function openAPICallBakcTest2( d ) {
		console.log( d.channel.q, d )
	}
	dk.js( openAPICallBakcTest3, 'http://apis.daum.net/contents/movie?apikey=' + 'bffaf40ba59dff1a741998dd1d594e122f4260af&q=' + 'RoboCop' + '&output=json&callback=' )
	function openAPICallBakcTest3( d ) {
		console.log( d.channel.q, d )
	}
	//		/// ajax test
	dk.get( null, 'test2.txt' )

	dk.WIN.SCROLL.S( 'scrollTest', function() {
//		console.log('dk.WIN.scrollX : ',dk.WIN.scrollX,' / dk.WIN.scrollY : ',dk.WIN.scrollY)
		dk.query( '#scroll' )[0].innerHTML = 'dk.WIN.scrollX : ' + dk.WIN.scrollX + ' / dk.WIN.scrollY : ' + dk.WIN.scrollY
		dk.query( '#win' )[0].innerHTML = 'dk.WIN.width : ' + dk.WIN.width + ' / dk.WIN.height : ' + dk.WIN.height
//		dk.WIN.scroll(0,500)
	} );

	//	/// ajax test
	dk.get( getJSON_test, 'json/json.json' )
	function getJSON_test( d ) {
		var data = JSON.parse( d ), root = dk.query( '#json' )[0]
		console.log( data.id )
		checkValue( data )

		function checkValue() {
			var t0 = arguments[0], k
			if( typeof t0 == 'object' ) parseObj( t0, root )
		}

		function parseObj() {
			var data = arguments[0], parent = arguments[1], k, dom
			for( k in data ){
				dom = document.createElement( 'ul' )
				parent.appendChild( dom )
				if( data[k]['pop'] ) dom.innerHTML = '<div class="array"><span>+</span> ' + k + ' : array </div>', parseArray( data[k], dom )
				else{
					if( dk.REG.isPerfectURL( data[k] ) ) dom.innerHTML = '<div class="data"><span></span> ' + k + ' : <a href="' + data[k] + '">' + data[k] + '</a></div>'
					else dom.innerHTML = '<div class="data"><span></span>' + k +' : '+ data[k] + '</a></div>'

				}
			}
		}

		function parseArray() {
			var data = arguments[0], parent = arguments[1], dom
			for( var i = 0; i < data.length; i++ ){
				dom = document.createElement( 'ul' )
				parent.appendChild( dom )

				if( data[i]['pop'] ) dom.innerHTML = '<div class="array"><span>+</span> ' + i + ' : array</div>', parseArray( data[i], dom )
				else{
					console.log( '어레이에서 배열아닌거 체크', data[i], typeof data[i] )
					if( typeof data[i] == 'string' || typeof data[i] == 'number' ){
						if( dk.REG.isPerfectURL( data[i] ) ) dom.innerHTML = '<div class="data"><span>+</span> ' + i + ' : <a href="' + data[i] + '">' + data[i] + '</a></div>'
						else dom.innerHTML = '<div class="data"><span>+</span> ' + i + ' : ' + data[i] + '</div>'
					} else{
						dom.innerHTML = '<div class="obj"><span>+</span> ' + i + ' : obj</div>', parseObj( data[i], dom )
					}
				}
			}
		}
	}


</script>
</body>
</html>
